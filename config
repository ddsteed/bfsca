#!/usr/bin/env  bash
#-----------------------------------------------------------------------
# This shell script is to set up the working scatch and the store 
# directory and compile all the source codes.
#-----------------------------------------------------------------------
function make_work {
    echo -n " Please specify the working scratch directory, [./work]: "
    read work

    if [[ $work == "" ]]; then	work="$currpath/work"; fi
    if [ ! -d $work ]; then mkdir $work; fi
    cd $work
    work=`pwd`
    cd $currpath
}

#-----------------------------------------------------------------------
function store_name {
    st=(
./alam/H2/CCSD/ACCD
./alam/H2/CCSD/ACCQ
./alam/H2/CCSD/ACCT
./alam/H2/CCSD/CCD
./alam/H2/CCSD/CCQ
./alam/H2/CCSD/CCT
./alam/H2/CCSD/M2
./alam/H2/CCSD/M2H
./alam/H2/CCSD
./alam/H2/DATA_IN/ACCD
./alam/H2/DATA_IN/ACCQ
./alam/H2/DATA_IN/ACCT
./alam/H2/DATA_IN/CCD
./alam/H2/DATA_IN/CCQ
./alam/H2/DATA_IN/CCT
./alam/H2/DATA_IN/M2
./alam/H2/DATA_IN/M2H
./alam/H2/DATA_IN
./alam/H2/HF/BTAD/ACCD
./alam/H2/HF/BTAD/ACCQ
./alam/H2/HF/BTAD/ACCT
./alam/H2/HF/BTAD/CCD
./alam/H2/HF/BTAD/CCQ
./alam/H2/HF/BTAD/CCT
./alam/H2/HF/BTAD/M2
./alam/H2/HF/BTAD/M2H
./alam/H2/HF/BTAD
./alam/H2/HF/DSG/ACCD
./alam/H2/HF/DSG/ACCQ
./alam/H2/HF/DSG/ACCT
./alam/H2/HF/DSG/CCD
./alam/H2/HF/DSG/CCQ
./alam/H2/HF/DSG/CCT
./alam/H2/HF/DSG/M2
./alam/H2/HF/DSG/M2H
./alam/H2/HF/DSG
./alam/H2/HF
./alam/H2
./alam/N2/CCSD/ACCD
./alam/N2/CCSD/ACCQ
./alam/N2/CCSD/ACCT
./alam/N2/CCSD/CCD
./alam/N2/CCSD/CCQ
./alam/N2/CCSD/CCT
./alam/N2/CCSD/M2H
./alam/N2/CCSD
./alam/N2/DATA_IN/ACCD
./alam/N2/DATA_IN/ACCQ
./alam/N2/DATA_IN/ACCT
./alam/N2/DATA_IN/CCD
./alam/N2/DATA_IN/CCQ
./alam/N2/DATA_IN/CCT
./alam/N2/DATA_IN/M2H
./alam/N2/DATA_IN
./alam/N2/HF/BTAD/ACCD
./alam/N2/HF/BTAD/ACCQ
./alam/N2/HF/BTAD/ACCT
./alam/N2/HF/BTAD/CCD
./alam/N2/HF/BTAD/CCQ
./alam/N2/HF/BTAD/CCT
./alam/N2/HF/BTAD/M2H
./alam/N2/HF/BTAD
./alam/N2/HF/DSG/ACCD
./alam/N2/HF/DSG/ACCQ
./alam/N2/HF/DSG/ACCT
./alam/N2/HF/DSG/CCD
./alam/N2/HF/DSG/CCQ
./alam/N2/HF/DSG/CCT
./alam/N2/HF/DSG/M2H
./alam/N2/HF/DSG
./alam/N2/HF
./alam/N2
./alam
./exker/H2/CCSD/BTAD/ACCD
./exker/H2/CCSD/BTAD/ACCQ
./exker/H2/CCSD/BTAD/ACCT
./exker/H2/CCSD/BTAD/CCD
./exker/H2/CCSD/BTAD/CCQ
./exker/H2/CCSD/BTAD/CCT
./exker/H2/CCSD/BTAD/M2
./exker/H2/CCSD/BTAD/M2H
./exker/H2/CCSD/BTAD
./exker/H2/CCSD/DSG/ACCD
./exker/H2/CCSD/DSG/ACCQ
./exker/H2/CCSD/DSG/ACCT
./exker/H2/CCSD/DSG/CCD
./exker/H2/CCSD/DSG/CCQ
./exker/H2/CCSD/DSG/CCT
./exker/H2/CCSD/DSG/M2
./exker/H2/CCSD/DSG/M2H
./exker/H2/CCSD/DSG
./exker/H2/CCSD
./exker/H2/HF/BTAD/ACCD
./exker/H2/HF/BTAD/ACCQ
./exker/H2/HF/BTAD/ACCT
./exker/H2/HF/BTAD/CCD
./exker/H2/HF/BTAD/CCQ
./exker/H2/HF/BTAD/CCT
./exker/H2/HF/BTAD/M2
./exker/H2/HF/BTAD/M2H
./exker/H2/HF/BTAD
./exker/H2/HF/DSG/ACCD
./exker/H2/HF/DSG/ACCQ
./exker/H2/HF/DSG/ACCT
./exker/H2/HF/DSG/CCD
./exker/H2/HF/DSG/CCQ
./exker/H2/HF/DSG/CCT
./exker/H2/HF/DSG/M2
./exker/H2/HF/DSG/M2H
./exker/H2/HF/DSG
./exker/H2/HF
./exker/H2
./exker/N2/CCSD/BTAD/ACCD
./exker/N2/CCSD/BTAD/ACCQ
./exker/N2/CCSD/BTAD/ACCT
./exker/N2/CCSD/BTAD/CCD
./exker/N2/CCSD/BTAD/CCQ
./exker/N2/CCSD/BTAD/CCT
./exker/N2/CCSD/BTAD/M2H
./exker/N2/CCSD/BTAD
./exker/N2/CCSD/DSG/ACCD
./exker/N2/CCSD/DSG/ACCQ
./exker/N2/CCSD/DSG/ACCT
./exker/N2/CCSD/DSG/CCD
./exker/N2/CCSD/DSG/CCQ
./exker/N2/CCSD/DSG/CCT
./exker/N2/CCSD/DSG/M2H
./exker/N2/CCSD/DSG
./exker/N2/CCSD
./exker/N2/HF/BTAD/ACCD
./exker/N2/HF/BTAD/ACCQ
./exker/N2/HF/BTAD/ACCT
./exker/N2/HF/BTAD/CCD
./exker/N2/HF/BTAD/CCQ
./exker/N2/HF/BTAD/CCT
./exker/N2/HF/BTAD/M2H
./exker/N2/HF/BTAD
./exker/N2/HF/DSG/ACCD
./exker/N2/HF/DSG/ACCQ
./exker/N2/HF/DSG/ACCT
./exker/N2/HF/DSG/CCD
./exker/N2/HF/DSG/CCQ
./exker/N2/HF/DSG/CCT
./exker/N2/HF/DSG/M2H
./exker/N2/HF/DSG
./exker/N2/HF
./exker/N2
./exker
./lavib/H2/CCSD/BTAD/ACCD
./lavib/H2/CCSD/BTAD/ACCQ
./lavib/H2/CCSD/BTAD/ACCT
./lavib/H2/CCSD/BTAD/CCD
./lavib/H2/CCSD/BTAD/CCQ
./lavib/H2/CCSD/BTAD/CCT
./lavib/H2/CCSD/BTAD/M2
./lavib/H2/CCSD/BTAD/M2H
./lavib/H2/CCSD/BTAD
./lavib/H2/CCSD/DSG/ACCD
./lavib/H2/CCSD/DSG/ACCQ
./lavib/H2/CCSD/DSG/ACCT
./lavib/H2/CCSD/DSG/CCD
./lavib/H2/CCSD/DSG/CCQ
./lavib/H2/CCSD/DSG/CCT
./lavib/H2/CCSD/DSG/M2
./lavib/H2/CCSD/DSG/M2H
./lavib/H2/CCSD/DSG
./lavib/H2/CCSD
./lavib/H2/HF/BTAD/ACCD
./lavib/H2/HF/BTAD/ACCQ
./lavib/H2/HF/BTAD/ACCT
./lavib/H2/HF/BTAD/CCD
./lavib/H2/HF/BTAD/CCQ
./lavib/H2/HF/BTAD/CCT
./lavib/H2/HF/BTAD/M2
./lavib/H2/HF/BTAD/M2H
./lavib/H2/HF/BTAD
./lavib/H2/HF/DSG/ACCD
./lavib/H2/HF/DSG/ACCQ
./lavib/H2/HF/DSG/ACCT
./lavib/H2/HF/DSG/CCD
./lavib/H2/HF/DSG/CCQ
./lavib/H2/HF/DSG/CCT
./lavib/H2/HF/DSG/M2
./lavib/H2/HF/DSG/M2H
./lavib/H2/HF/DSG
./lavib/H2/HF
./lavib/H2
./lavib/N2/CCSD/BTAD/ACCD
./lavib/N2/CCSD/BTAD/ACCQ
./lavib/N2/CCSD/BTAD/ACCT
./lavib/N2/CCSD/BTAD/CCD
./lavib/N2/CCSD/BTAD/CCQ
./lavib/N2/CCSD/BTAD/CCT
./lavib/N2/CCSD/BTAD/M2H
./lavib/N2/CCSD/BTAD
./lavib/N2/CCSD/DSG/ACCD
./lavib/N2/CCSD/DSG/ACCQ
./lavib/N2/CCSD/DSG/ACCT
./lavib/N2/CCSD/DSG/CCD
./lavib/N2/CCSD/DSG/CCQ
./lavib/N2/CCSD/DSG/CCT
./lavib/N2/CCSD/DSG/M2H
./lavib/N2/CCSD/DSG
./lavib/N2/CCSD
./lavib/N2/HF/BTAD/ACCD
./lavib/N2/HF/BTAD/ACCQ
./lavib/N2/HF/BTAD/ACCT
./lavib/N2/HF/BTAD/CCD
./lavib/N2/HF/BTAD/CCQ
./lavib/N2/HF/BTAD/CCT
./lavib/N2/HF/BTAD/M2H
./lavib/N2/HF/BTAD
./lavib/N2/HF/DSG/ACCD
./lavib/N2/HF/DSG/ACCQ
./lavib/N2/HF/DSG/ACCT
./lavib/N2/HF/DSG/CCD
./lavib/N2/HF/DSG/CCQ
./lavib/N2/HF/DSG/CCT
./lavib/N2/HF/DSG/M2H
./lavib/N2/HF/DSG
./lavib/N2/HF
./lavib/N2
./lavib
./mpmom/H2/HF/BTAD/ACCD
./mpmom/H2/HF/BTAD/ACCQ
./mpmom/H2/HF/BTAD/ACCT
./mpmom/H2/HF/BTAD/CCD
./mpmom/H2/HF/BTAD/CCQ
./mpmom/H2/HF/BTAD/CCT
./mpmom/H2/HF/BTAD/M2
./mpmom/H2/HF/BTAD/M2H
./mpmom/H2/HF/BTAD
./mpmom/H2/HF/DSG/ACCD
./mpmom/H2/HF/DSG/ACCQ
./mpmom/H2/HF/DSG/ACCT
./mpmom/H2/HF/DSG/CCD
./mpmom/H2/HF/DSG/CCQ
./mpmom/H2/HF/DSG/CCT
./mpmom/H2/HF/DSG/M2
./mpmom/H2/HF/DSG/M2H
./mpmom/H2/HF/DSG
./mpmom/H2/HF
./mpmom/H2
./mpmom/N2/HF/BTAD/ACCD
./mpmom/N2/HF/BTAD/ACCQ
./mpmom/N2/HF/BTAD/ACCT
./mpmom/N2/HF/BTAD/CCD
./mpmom/N2/HF/BTAD/CCQ
./mpmom/N2/HF/BTAD/CCT
./mpmom/N2/HF/BTAD/M2H
./mpmom/N2/HF/BTAD
./mpmom/N2/HF/DSG/ACCD
./mpmom/N2/HF/DSG/ACCQ
./mpmom/N2/HF/DSG/ACCT
./mpmom/N2/HF/DSG/CCD
./mpmom/N2/HF/DSG/CCQ
./mpmom/N2/HF/DSG/CCT
./mpmom/N2/HF/DSG/M2H
./mpmom/N2/HF/DSG
./mpmom/N2/HF
./mpmom/N2
./mpmom
./spfd/H2/DATA_IN/HF/ACCD
./spfd/H2/DATA_IN/HF/ACCQ
./spfd/H2/DATA_IN/HF/ACCT
./spfd/H2/DATA_IN/HF/CCD
./spfd/H2/DATA_IN/HF/CCQ
./spfd/H2/DATA_IN/HF/CCT
./spfd/H2/DATA_IN/HF/M2
./spfd/H2/DATA_IN/HF/M2H
./spfd/H2/DATA_IN/HF
./spfd/H2/DATA_IN
./spfd/H2/HF/BTAD/ACCD
./spfd/H2/HF/BTAD/ACCQ
./spfd/H2/HF/BTAD/ACCT
./spfd/H2/HF/BTAD/CCD
./spfd/H2/HF/BTAD/CCQ
./spfd/H2/HF/BTAD/CCT
./spfd/H2/HF/BTAD/M2
./spfd/H2/HF/BTAD/M2H
./spfd/H2/HF/BTAD
./spfd/H2/HF/DSG/ACCD
./spfd/H2/HF/DSG/ACCQ
./spfd/H2/HF/DSG/ACCT
./spfd/H2/HF/DSG/CCD
./spfd/H2/HF/DSG/CCQ
./spfd/H2/HF/DSG/CCT
./spfd/H2/HF/DSG/M2
./spfd/H2/HF/DSG/M2H
./spfd/H2/HF/DSG
./spfd/H2/HF
./spfd/H2
./spfd/N2/DATA_IN/HF/ACCD
./spfd/N2/DATA_IN/HF/ACCQ
./spfd/N2/DATA_IN/HF/ACCT
./spfd/N2/DATA_IN/HF/CCD
./spfd/N2/DATA_IN/HF/CCQ
./spfd/N2/DATA_IN/HF/CCT
./spfd/N2/DATA_IN/HF/M2H
./spfd/N2/DATA_IN/HF
./spfd/N2/DATA_IN
./spfd/N2/HF/BTAD/ACCD
./spfd/N2/HF/BTAD/ACCQ
./spfd/N2/HF/BTAD/ACCT
./spfd/N2/HF/BTAD/CCD
./spfd/N2/HF/BTAD/CCQ
./spfd/N2/HF/BTAD/CCT
./spfd/N2/HF/BTAD/M2H
./spfd/N2/HF/BTAD
./spfd/N2/HF/DSG/ACCD
./spfd/N2/HF/DSG/ACCQ
./spfd/N2/HF/DSG/ACCT
./spfd/N2/HF/DSG/CCD
./spfd/N2/HF/DSG/CCQ
./spfd/N2/HF/DSG/CCT
./spfd/N2/HF/DSG/M2H
./spfd/N2/HF/DSG
./spfd/N2/HF
./spfd/N2
./spfd
./vpol/H2/CCSD/ACCD
./vpol/H2/CCSD/ACCQ
./vpol/H2/CCSD/ACCT
./vpol/H2/CCSD/CCD
./vpol/H2/CCSD/CCQ
./vpol/H2/CCSD/CCT
./vpol/H2/CCSD/M2
./vpol/H2/CCSD/M2H
./vpol/H2/CCSD
./vpol/H2/DATA_IN/.svn/prop-base
./vpol/H2/DATA_IN/.svn/props
./vpol/H2/DATA_IN/.svn/text-base
./vpol/H2/DATA_IN/.svn/tmp/prop-base
./vpol/H2/DATA_IN/.svn/tmp/props
./vpol/H2/DATA_IN/.svn/tmp/text-base
./vpol/H2/DATA_IN/.svn/tmp
./vpol/H2/DATA_IN/.svn
./vpol/H2/DATA_IN/VEC/HF/ACCD
./vpol/H2/DATA_IN/VEC/HF/ACCQ
./vpol/H2/DATA_IN/VEC/HF/ACCT
./vpol/H2/DATA_IN/VEC/HF/CCD
./vpol/H2/DATA_IN/VEC/HF/CCQ
./vpol/H2/DATA_IN/VEC/HF/CCT
./vpol/H2/DATA_IN/VEC/HF/M2
./vpol/H2/DATA_IN/VEC/HF/M2H
./vpol/H2/DATA_IN/VEC/HF
./vpol/H2/DATA_IN/VEC
./vpol/H2/DATA_IN
./vpol/H2/HF/BTAD/ACCD
./vpol/H2/HF/BTAD/ACCQ
./vpol/H2/HF/BTAD/ACCT
./vpol/H2/HF/BTAD/CCD
./vpol/H2/HF/BTAD/CCQ
./vpol/H2/HF/BTAD/CCT
./vpol/H2/HF/BTAD/M2
./vpol/H2/HF/BTAD/M2H
./vpol/H2/HF/BTAD
./vpol/H2/HF/DSG/ACCD
./vpol/H2/HF/DSG/ACCQ
./vpol/H2/HF/DSG/ACCT
./vpol/H2/HF/DSG/CCD
./vpol/H2/HF/DSG/CCQ
./vpol/H2/HF/DSG/CCT
./vpol/H2/HF/DSG/M2
./vpol/H2/HF/DSG/M2H
./vpol/H2/HF/DSG
./vpol/H2/HF
./vpol/H2/POT_ORI/CCSD
./vpol/H2/POT_ORI/HF/BTAD/ACCD
./vpol/H2/POT_ORI/HF/BTAD/ACCQ
./vpol/H2/POT_ORI/HF/BTAD/ACCT
./vpol/H2/POT_ORI/HF/BTAD/CCD
./vpol/H2/POT_ORI/HF/BTAD/CCQ
./vpol/H2/POT_ORI/HF/BTAD/CCT
./vpol/H2/POT_ORI/HF/BTAD/M2
./vpol/H2/POT_ORI/HF/BTAD/M2H
./vpol/H2/POT_ORI/HF/BTAD
./vpol/H2/POT_ORI/HF/DSG/ACCD
./vpol/H2/POT_ORI/HF/DSG/ACCQ
./vpol/H2/POT_ORI/HF/DSG/ACCT
./vpol/H2/POT_ORI/HF/DSG/CCD
./vpol/H2/POT_ORI/HF/DSG/CCQ
./vpol/H2/POT_ORI/HF/DSG/CCT
./vpol/H2/POT_ORI/HF/DSG/M2
./vpol/H2/POT_ORI/HF/DSG/M2H
./vpol/H2/POT_ORI/HF/DSG
./vpol/H2/POT_ORI/HF
./vpol/H2/POT_ORI
./vpol/H2
./vpol/N2/CCSD/ACCD
./vpol/N2/CCSD/ACCQ
./vpol/N2/CCSD/ACCT
./vpol/N2/CCSD/CCD
./vpol/N2/CCSD/CCQ
./vpol/N2/CCSD/CCT
./vpol/N2/CCSD/M2H
./vpol/N2/CCSD
./vpol/N2/DATA_IN/VEC/HF/ACCD
./vpol/N2/DATA_IN/VEC/HF/ACCQ
./vpol/N2/DATA_IN/VEC/HF/ACCT
./vpol/N2/DATA_IN/VEC/HF/CCD
./vpol/N2/DATA_IN/VEC/HF/CCQ
./vpol/N2/DATA_IN/VEC/HF/CCT
./vpol/N2/DATA_IN/VEC/HF/M2H
./vpol/N2/DATA_IN/VEC/HF
./vpol/N2/DATA_IN/VEC
./vpol/N2/DATA_IN
./vpol/N2/HF/BTAD/ACCD
./vpol/N2/HF/BTAD/ACCQ
./vpol/N2/HF/BTAD/ACCT
./vpol/N2/HF/BTAD/CCD
./vpol/N2/HF/BTAD/CCQ
./vpol/N2/HF/BTAD/CCT
./vpol/N2/HF/BTAD/M2H
./vpol/N2/HF/BTAD
./vpol/N2/HF/DSG/ACCD
./vpol/N2/HF/DSG/ACCQ
./vpol/N2/HF/DSG/ACCT
./vpol/N2/HF/DSG/CCD
./vpol/N2/HF/DSG/CCQ
./vpol/N2/HF/DSG/CCT
./vpol/N2/HF/DSG/M2H
./vpol/N2/HF/DSG
./vpol/N2/HF
./vpol/N2/POT_ORI/CCSD
./vpol/N2/POT_ORI/HF/BTAD/ACCD
./vpol/N2/POT_ORI/HF/BTAD/ACCQ
./vpol/N2/POT_ORI/HF/BTAD/ACCT
./vpol/N2/POT_ORI/HF/BTAD/CCD
./vpol/N2/POT_ORI/HF/BTAD/CCQ
./vpol/N2/POT_ORI/HF/BTAD/CCT
./vpol/N2/POT_ORI/HF/BTAD/M2H
./vpol/N2/POT_ORI/HF/BTAD
./vpol/N2/POT_ORI/HF/DSG/ACCD
./vpol/N2/POT_ORI/HF/DSG/ACCQ
./vpol/N2/POT_ORI/HF/DSG/ACCT
./vpol/N2/POT_ORI )
}

#-----------------------------------------------------------------------
function make_store {
    echo -n " Please specify the store dirctory, [./store]: "
    read store

    if [[ $store == "" ]]; then	store="$currpath/store"; fi
    if [ ! -d $store ]; then mkdir -p $store; fi
    cd $store
    store=`pwd`
    store_name
    for dir in ${st[@]}; do
	if [ ! -d $dir ]; then mkdir -p $dir; fi
    done
    cd $currpath
}

#-----------------------------------------------------------------------
function ch_script {
    cd $currpath/run

    for file in *; do
	sed -e 's:work=.*$:work="'"$work"'":' \
            -e 's:storeT=.*$:storeT="'"$store"'":' \
            $file > $file.tt
	mv $file.tt $file
	chmod a+x $file
    done

    cd ..
}

#-----------------------------------------------------------------------
function compile {
    echo
    echo " NOTE: work = $work "
    echo "      store = $store "
    echo
    echo " Now we are compiling all of the source codes!"
    echo
    
    cd tools
    ./compile.sh -r
    cd ..
}

#-----------------------------------------------------------------------
#--- main function

currpath=`pwd`
make_work
make_store
ch_script
compile
